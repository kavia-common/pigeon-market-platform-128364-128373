{"is_source_file": true, "format": "JavaScript", "description": "This file defines a mock API layer for a frontend application, including mock implementations for user authentication, listings, shopping cart, orders, and payments. It uses localStorage to simulate persistence and provides functions for various API interactions.", "external_files": [], "external_methods": ["setTimeout", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem"], "published": ["authApi", "listingsApi", "cartApi", "ordersApi", "paymentsApi"], "classes": [], "methods": [{"name": "delay(ms = 400)", "description": "Asynchronous delay function to simulate network latency.", "scope": "", "scopeKind": ""}, {"name": "uid()", "description": "Generates a pseudo-random unique identifier.", "scope": "", "scopeKind": ""}, {"name": "getLS(key, fallback)", "description": "Retrieves data from localStorage, parsing JSON, with fallback.", "scope": "", "scopeKind": ""}, {"name": "setLS(key, value)", "description": "Stores data in localStorage as a JSON string.", "scope": "", "scopeKind": ""}, {"name": "seed (immediately invoked function)", "description": "Seeds initial demo listings if localStorage is empty."}, {"name": "add(payload)", "scope": "listingsApi", "scopeKind": "class", "description": "unavailable"}, {"name": "create({ items, total, paymentRef })", "scope": "ordersApi", "scopeKind": "class", "description": "unavailable"}, {"name": "createCheckoutSession({ items })", "scope": "paymentsApi", "scopeKind": "class", "description": "unavailable"}, {"name": "getSession()", "scope": "authApi", "scopeKind": "class", "description": "unavailable"}, {"name": "list()", "scope": "ordersApi", "scopeKind": "class", "description": "unavailable"}, {"name": "list({ search = '', filters = {} } = {})", "scope": "listingsApi", "scopeKind": "class", "description": "unavailable"}, {"name": "login({ email })", "scope": "authApi", "scopeKind": "class", "description": "unavailable"}, {"name": "logout()", "scope": "authApi", "scopeKind": "class", "description": "unavailable"}, {"name": "register({ email, password, name })", "scope": "authApi", "scopeKind": "class", "description": "unavailable"}], "calls": ["setTimeout", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "getLS", "setLS"], "search-terms": ["mock API", "localStorage", "seed listings", "authApi", "listingsApi", "cartApi", "ordersApi", "paymentsApi"], "state": 2, "file_id": 21, "knowledge_revision": 44, "git_revision": "", "ctags": [{"_type": "tag", "name": "LS_CART", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^const LS_CART = 'pm_cart';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LS_LISTINGS", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^const LS_LISTINGS = 'pm_listings';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LS_ORDERS", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^const LS_ORDERS = 'pm_orders';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LS_USER", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^const LS_USER = 'pm_user';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "add", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^  async add(payload) {$/", "language": "JavaScript", "kind": "method", "signature": "(payload)", "scope": "listingsApi", "scopeKind": "class"}, {"_type": "tag", "name": "authApi", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^export const authApi = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "cartApi", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^export const cartApi = {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^  async create({ items, total, paymentRef }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ items, total, paymentRef })", "scope": "ordersApi", "scopeKind": "class"}, {"_type": "tag", "name": "createCheckoutSession", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^  async createCheckoutSession({ items }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ items })", "scope": "paymentsApi", "scopeKind": "class"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const newItem = { id: uid(), createdAt: Date.now(), ...payload };$/", "language": "JavaScript", "kind": "property", "scope": "listingsApi.add.newItem", "scopeKind": "class"}, {"_type": "tag", "name": "curr", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const curr = getLS(LS_CART, []);$/", "language": "JavaScript", "kind": "constant", "scope": "cartApi", "scopeKind": "class"}, {"_type": "tag", "name": "delay", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^function delay(ms = 400) {$/", "language": "JavaScript", "kind": "function", "signature": "(ms = 400)"}, {"_type": "tag", "name": "demo", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const demo = Array.from({ length: 12 }).map((_, i) => ({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const user = { id: uid(), email, name };$/", "language": "JavaScript", "kind": "field", "scope": "authApi.register.user", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const user = { id: uid(), email, name: email.split('@')[0] };$/", "language": "JavaScript", "kind": "field", "scope": "authApi.login.user", "scopeKind": "class"}, {"_type": "tag", "name": "exists", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const exists = curr.find(c => c.id === item.id);$/", "language": "JavaScript", "kind": "constant", "scope": "cartApi", "scopeKind": "class"}, {"_type": "tag", "name": "getLS", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^function getLS(key, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, fallback)"}, {"_type": "tag", "name": "getSession", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^  getSession() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "authApi", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^      id: uid(),$/", "language": "JavaScript", "kind": "property", "scope": "ordersApi.create.order", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const newItem = { id: uid(), createdAt: Date.now(), ...payload };$/", "language": "JavaScript", "kind": "property", "scope": "listingsApi.add.newItem", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const user = { id: uid(), email, name };$/", "language": "JavaScript", "kind": "property", "scope": "authApi.register.user", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const user = { id: uid(), email, name: email.split('@')[0] };$/", "language": "JavaScript", "kind": "property", "scope": "authApi.login.user", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^      items,$/", "language": "JavaScript", "kind": "field", "scope": "ordersApi.create.order", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "ordersApi", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^  async list({ search = '', filters = {} } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "({ search = '', filters = {} } = {})", "scope": "listingsApi", "scopeKind": "class"}, {"_type": "tag", "name": "listingsApi", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^export const listingsApi = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^  async login({ email }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ email })", "scope": "authApi", "scopeKind": "class"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^  async logout() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "authApi", "scopeKind": "class"}, {"_type": "tag", "name": "newItem", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const newItem = { id: uid(), createdAt: Date.now(), ...payload };$/", "language": "JavaScript", "kind": "class", "scope": "listingsApi.add", "scopeKind": "class"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const next = curr.filter(i => i.id !== id);$/", "language": "JavaScript", "kind": "constant", "scope": "cartApi", "scopeKind": "class"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const next = exists ? curr : [...curr, { ...item, qty: 1 }];$/", "language": "JavaScript", "kind": "constant", "scope": "cartApi", "scopeKind": "class"}, {"_type": "tag", "name": "order", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const order = {$/", "language": "JavaScript", "kind": "class", "scope": "ordersApi.create", "scopeKind": "class"}, {"_type": "tag", "name": "ordersApi", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^export const ordersApi = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "paymentsApi", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^export const paymentsApi = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^  async register({ email, password, name }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ email, password, name })", "scope": "authApi", "scopeKind": "class"}, {"_type": "tag", "name": "setLS", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^function setLS(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^function uid() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const user = { id: uid(), email, name };$/", "language": "JavaScript", "kind": "class", "scope": "authApi.register", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/pigeon-market-platform-128364-128373/frontend_react_app/src/services/api.js", "pattern": "/^    const user = { id: uid(), email, name: email.split('@')[0] };$/", "language": "JavaScript", "kind": "class", "scope": "authApi.login", "scopeKind": "class"}], "hash": "2fef96b2aeb3af4ecfd29aea41d12b16", "format-version": 4, "code-base-name": "frontend_react_app", "filename": "frontend_react_app/src/services/api.js", "fields": [{"name": "const newItem = { id: uid(), createdAt: Date.now(), ...payload };", "scope": "listingsApi.add.newItem", "scopeKind": "class", "description": "unavailable"}, {"name": "const user = { id: uid(), email, name };", "scope": "authApi.register.user", "scopeKind": "class", "description": "unavailable"}, {"name": "const user = { id: uid(), email, name: email.split('@')[0] };", "scope": "authApi.login.user", "scopeKind": "class", "description": "unavailable"}, {"name": "id: uid(),", "scope": "ordersApi.create.order", "scopeKind": "class", "description": "unavailable"}, {"name": "items,", "scope": "ordersApi.create.order", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"44": ""}]}